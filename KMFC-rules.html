<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>福誠高中學生手冊</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
    body {
        margin: 0;
        background: #111;
        font-family: -apple-system, "PingFang TC", sans-serif;
        overflow: hidden;
    }

    /* 工具列 */
    #toolbar {
        height: 55px;
        background: #000;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 0 12px;
        color: white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        position: relative;
        z-index: 10;
    }

    button {
        padding: 8px 14px;
        border-radius: 8px;
        background: #222;
        color: #fff;
        border: none;
        font-size: 15px;
        transition: 0.2s;
    }

    button:active { transform: scale(0.92); }

    #pageInfo {
        margin-left: auto;
        opacity: 0.85;
        font-size: 15px;
    }

    /* PDF 區域 */
    #viewerContainer {
        height: calc(100vh - 55px);
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        background: #1b1b1b;
        text-align: center;
    }

    /* 控制 PDF 寬度（避免超大） */
    #pdfWrapper {
        width: 100%;
        max-width: 100vw;
        overflow: hidden; /* 防止 iPhone 放大 */
    }

    canvas {
        width: 100% !important;      /* 自動符合螢幕寬度 */
        height: auto !important;     /* 自動等比例 */
        background: white;
        border-radius: 6px;
        margin: 20px 0;
        box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
</style>
</head>
<body>

<div id="toolbar">
    <button onclick="prevPage()">⬅</button>
    <button onclick="nextPage()">➡</button>
    <span id="pageInfo">1 / ?</span>
</div>

<div id="viewerContainer">
    <div id="pdfWrapper">
        <canvas id="pdfCanvas"></canvas>
    </div>
</div>

<script>
const url = "114福誠高中學生手冊.pdf";

let pdfDoc = null;
let pageNum = 1;
let scale = 1.5;  // 先高畫質渲染，再自動縮小顯示
const canvas = document.getElementById("pdfCanvas");
const ctx = canvas.getContext("2d");

pdfjsLib.getDocument(url).promise.then(pdf => {
    pdfDoc = pdf;
    renderPage(pageNum);
});

function renderPage(num) {
    pdfDoc.getPage(num).then(page => {
        const dpi = window.devicePixelRatio || 2;

        const viewport = page.getViewport({
            scale: scale * dpi
        });

        canvas.width = viewport.width;
        canvas.height = viewport.height;

        page.render({
            canvasContext: ctx,
            viewport
        });

        document.getElementById("pageInfo").innerText =
            `${num} / ${pdfDoc.numPages}`;
    });
}

function prevPage() {
    if (pageNum <= 1) return;
    pageNum--;
    renderPage(pageNum);
}

function nextPage() {
    if (pageNum >= pdfDoc.numPages) return;
    pageNum++;
    renderPage(pageNum);
}
</script>

</body>
</html>