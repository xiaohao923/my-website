<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>æ—©ä¸Šèµ·ä¾†çœ‹çœ‹å§</title>
<meta name="color-scheme" content="light dark" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+TC:wght@400;600;800&display=swap" rel="stylesheet" />
<style>
  :root{
    --bg1:#fff7f5; --bg2:#fefaf0;
    --ink:#2b2b2f; --muted:#7a7a86;
    --accent:#ffb4c8; --accent2:#ffd56a;
    --card:rgba(255,255,255,.72);
    --shadow:0 20px 60px rgba(255,145,174,.25);
    --ring:#ffc8dd;
    --glow:#ffd6e5aa;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg1:#121217; --bg2:#181821;
      --ink:#ececf6; --muted:#a6a6c9;
      --card:rgba(24,24,32,.65);
      --shadow:0 20px 60px rgba(0,0,0,.35);
      --ring:#5b4bff33; --glow:#ff80bf33;
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100svh; color:var(--ink);
    font-family:"Noto Sans TC","Inter",system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",sans-serif;
    background:
      radial-gradient(1200px 800px at 20% -10%, var(--bg2), transparent 60%),
      radial-gradient(1400px 900px at 110% 10%, var(--accent)/.12, transparent 55%),
      linear-gradient(180deg, var(--bg1), var(--bg2) 60%, var(--bg1));
    display:grid; place-items:center; padding:24px; overflow:hidden;
  }

  /* èƒŒæ™¯æŸ”å…‰åœ˜ */
  .float{ position:fixed; inset:0; z-index:-2; pointer-events:none; overflow:hidden; }
  .blob{ position:absolute; width:520px; height:520px; border-radius:50%;
    filter: blur(40px) saturate(130%); opacity:.35; animation: drift 18s ease-in-out infinite; }
  .b1{ left:-140px; top:-120px; background: radial-gradient(circle at 30% 30%, var(--accent), transparent 60%); }
  .b2{ right:-140px; bottom:-140px; background: radial-gradient(circle at 70% 70%, var(--accent2), transparent 60%); animation-duration:22s; }
  @keyframes drift{ 0%,100%{ transform: translateY(-10px)} 50%{ transform: translateY(14px)} }

  /* è½ç“£ */
  .petals{ position:fixed; inset:0; pointer-events:none; z-index:-1; overflow:hidden; }
  .petal{
    position:absolute; font-size:18px; opacity:.9; will-change: transform, opacity;
    animation: fall linear forwards;
    filter: drop-shadow(0 6px 12px rgba(255,145,174,.25));
  }
  @keyframes fall{
    0%{ transform: translate3d(var(--x,0px), -10%, 0) rotate(0deg) scale(.9); opacity:.0; }
    5%{ opacity:1; }
    100%{ transform: translate3d(calc(var(--x,0px) + var(--sx,0px)), 115%, 0) rotate(360deg) scale(1.05); opacity:0; }
  }

  /* å¡ç‰‡ */
  .wrap{ width:min(860px,100%); perspective:1000px; }
  .card{
    background:var(--card); backdrop-filter: blur(12px);
    border:1px solid #ffffff33; border-radius:22px; box-shadow:var(--shadow);
    padding:clamp(18px,4vw,30px); position:relative; overflow:hidden;
    transform-style:preserve-3d; transition: transform .3s ease;
  }
  .ring{
    position:absolute; inset:-2px; border-radius:24px; padding:2px; pointer-events:none;
    background: conic-gradient(from 120deg, transparent 0 70%, var(--ring), transparent 90% 100%);
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
    animation: spin 6s linear infinite; opacity:.65;
  }
  @keyframes spin{to{transform:rotate(360deg)}}

  .sticker{
    position:absolute; right:-6px; top:-6px; transform: rotate(10deg) translateZ(10px);
    background:linear-gradient(180deg,#ffe9a7,#ffd56a); color:#5a460f;
    border:1px solid #ffffffaa; border-radius:14px; padding:6px 10px; font-weight:800;
    box-shadow:0 10px 22px rgba(255,213,106,.35);
  }

  .title{
    display:flex; align-items:center; gap:.6em; flex-wrap:wrap;
    font-weight:800; letter-spacing:.02em; font-size:clamp(22px,3.8vw,30px);
  }
  .subtitle{ color:var(--muted); margin-top:6px; }

  /* å…§å®¹å€ */
  .viewer{
    margin-top:14px; background:linear-gradient(180deg,#fff,#fff8fb);
    border:1px solid #ffffffaa; border-radius:16px; padding:22px; position:relative; overflow:hidden;
    transform: translateZ(5px);
  }
  @media (prefers-color-scheme: dark){
    .viewer{ background:linear-gradient(180deg,#151521,#171726); border-color:#ffffff22; }
  }
  .h{ font-size:clamp(20px,3.2vw,26px); font-weight:800; margin:0 0 10px; }
  .msg{
    line-height:1.92; font-size:1.06rem; white-space:pre-wrap; word-break:break-word;
  }

  /* æ‰“å­—æ•ˆæœ + æ¼¸éš±å…‰æ¨™ */
  .typing{ display:inline; }
  .caret{
    display:inline-block; width:0.66ch; margin-left:2px; border-right:2px solid currentColor; opacity:.8;
    animation: blink 1s steps(1) infinite;
  }
  @keyframes blink{ 50%{ opacity:0 } }

  /* é»æ“Šæš–å…‰ & æ„›å¿ƒç²’å­ */
  .viewer::after{
    content:""; position:absolute; inset:-10%; pointer-events:none; border-radius:20px;
    background: radial-gradient(400px 280px at var(--x,50%) var(--y,50%), var(--glow), transparent 60%);
    opacity:0; transition: opacity .14s ease;
  }
  .viewer:active::after{ opacity:1; }
  .heart{
    position:absolute; font-size:18px; opacity:.95; animation: pop 1.1s ease forwards;
    user-select:none; pointer-events:none; filter: drop-shadow(0 6px 10px rgba(255,0,90,.25));
  }
  @keyframes pop{
    0%{ transform: translate(-50%, -20%) scale(.6); opacity:0; }
    10%{ opacity:1; }
    100%{ transform: translate(-50%, -120%) scale(1.3); opacity:0; }
  }

  /* ç¯€åˆ¶å‹•ç•«éœ€æ±‚ */
  @media (prefers-reduced-motion: reduce){
    .blob, .ring, .petal, .heart{ animation: none !important }
    .card{ transition: none !important }
    .viewer::after{ display:none }
  }

  /* åˆ—å° */
  @media print{
    body{ background:#fff; padding:0; }
    .ring, .sticker, .float, .petals{ display:none !important; }
    .wrap{ width:100%; }
    .card{ box-shadow:none; border:0; padding:0; }
    .viewer{ border:0; background:#fff; }
  }
</style>
</head>
<body>
  <!-- èƒŒæ™¯è£é£¾ -->
  <div class="float">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
  </div>
  <div class="petals" id="petals"></div>

  <div class="wrap" id="wrap">
    <div class="card" id="card">
      <div class="ring"></div>
      <div class="sticker">çœ‹å®Œè·Ÿæˆ‘èªª ğŸ’Œ</div>

      <div class="title" id="title">ğŸŒ· çµ¦é‡è¦çš„äºº Â· æº«æŸ”å‚³å¿ƒ</div>
      <div class="subtitle" id="subtitle">æˆ‘æƒ³æŠŠå…¨ä¸–ç•Œçš„æº«æŸ”éƒ½åˆ†ä½ ä¸€é»é»</div>

      <section class="viewer" id="viewer" aria-label="æº«é¦¨è¨Šæ¯é–±è®€å€">
        <h2 class="h" id="h"></h2>
        <div class="msg" id="msg"></div>
      </section>
    </div>
  </div>

<script>
  /* ========= åªæ”¹é€™è£¡ï¼šå›ºå®šå…§å®¹ ========= */
  const DATA = {
    heading: "ä¸è¦åœ¨ç‚ºåˆ¥äººå‚·å¿ƒã„Œ",
    message: `ä½ ä¸ç”¨è¦ºå¾—æˆ‘è·Ÿå¤œåŠåµæ¶éƒ½æ˜¯å› ç‚ºä½  æˆ‘ä¸æƒ³çœ‹åˆ°ä½ å—æ¬ºè² ä¹Ÿä¸æƒ³è®“ä½ é›£éå‚·å¿ƒè¢«é æ¯ æ‰€ä»¥æˆ‘æ‰æœƒç½µä»–
ä½ ä¹Ÿä¸è¦è½æ¯å€‹äººçš„è©± å«ä½ å¹¹å˜›ä½ å°±å¹¹å˜› ä½ æ˜¯å€‹äººä¸æ˜¯åˆ¥äººçš„å‚€å„¡ã€‚
ä½ æœ‰ä»€éº¼äº‹ç®—æˆ‘æ‹œè¨—ä½ ä¸€å®šè¦è·Ÿæˆ‘è¬›ä½ é€™æ¨£è‡ªå·±é›£éæˆ‘ä¹Ÿæ“”å¿ƒä½  
äººç”Ÿæœƒé‡åˆ°å¾ˆå¤šå½¢å½¢è‰²è‰²çš„äººæœ‹å‹ä¸ä¸€å®šä¸æœƒèƒŒå¾Œèªªä½ 
è·Ÿä½ ä¹Ÿä¸ä¸€å®šæ˜¯æ°¸é çš„æœ‹å‹ æ‹œè¨—ä½ ä¸è¦æŠŠæ¯å€‹äººéƒ½çœ‹å¾ˆé‡
ä¹Ÿä¸è¦ç”¨éŒ¢ä¾†ç¶­æŒé—œä¿‚ å¾ˆæ²’å¿…è¦è€Œä¸”ä¹‹å¾Œä½ ä¸€å®šæœƒå¾Œæ‚”`,
    sign: "â€” xiaohao~",
    date: new Date().toLocaleDateString("zh-TW", { year:"numeric", month:"long", day:"numeric" }),
    title: "ğŸŒ· çµ¦ä½ çš„æº«æŸ”å°ä¿¡",
    subtitle: "æŠŠå°å°çš„æº«æš–ï¼Œæ”¾é€²ä½ å£è¢‹"
  };

  // å¡å…¥æ¨™é¡Œã€å‰¯æ¨™é¡Œã€æ¨™é ­
  document.getElementById("title").textContent = DATA.title;
  document.getElementById("subtitle").textContent = DATA.subtitle;
  document.getElementById("h").textContent = DATA.heading;

  /* ========= æ‰“å­—é€²å ´ ========= */
  const msgEl = document.getElementById("msg");
  const text = `${DATA.message}\n\n${DATA.sign} Â· ${DATA.date}`;
  const speed = 23; // æ¯å­—æ¯«ç§’
  let i = 0;
  const caret = document.createElement("span");
  caret.className = "caret";
  const typingSpan = document.createElement("span");
  typingSpan.className = "typing";
  msgEl.appendChild(typingSpan);
  msgEl.appendChild(caret);

  function typeNext(){
    if(i < text.length){
      typingSpan.textContent += text[i++];
      requestAnimationFrame(()=> setTimeout(typeNext, speed));
    }else{
      caret.remove();
    }
  }
  // è‹¥ä½¿ç”¨è€…åå¥½æ¸›å°‘å‹•ç•«ï¼Œç›´æ¥é¡¯ç¤ºå…¨æ–‡
  const mediaReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  if(mediaReduced){
    typingSpan.textContent = text; caret.remove();
  }else{
    setTimeout(typeNext, 300);
  }

  /* ========= é»æ“Šï¼šæ„›å¿ƒç²’å­ + æš–å…‰è·Ÿéš¨ ========= */
  const viewer = document.getElementById("viewer");
  function spawnHeart(x,y){
    const el = document.createElement("div");
    el.className = "heart";
    el.textContent = ["ğŸ’—","ğŸ’–","ğŸ’","ğŸ’“","ğŸ’"][Math.floor(Math.random()*5)];
    el.style.left = x + "px"; el.style.top = y + "px";
    viewer.appendChild(el);
    setTimeout(()=> el.remove(), 1100);
  }
  viewer.addEventListener("pointermove", (e)=>{
    const r = viewer.getBoundingClientRect();
    viewer.style.setProperty("--x", ((e.clientX - r.left)/r.width*100).toFixed(2)+"%");
    viewer.style.setProperty("--y", ((e.clientY - r.top)/r.height*100).toFixed(2)+"%");
  });
  viewer.addEventListener("pointerdown", (e)=>{
    const r = viewer.getBoundingClientRect();
    spawnHeart(e.clientX - r.left, e.clientY - r.top);
  });

  /* ========= å¡ç‰‡è¼•å¾®è¦–å·® ========= */
  const card = document.getElementById("card");
  const wrap = document.getElementById("wrap");
  wrap.addEventListener("pointermove", (e)=>{
    const r = wrap.getBoundingClientRect();
    const rx = ((e.clientY - r.top) / r.height - .5) * -4; // ä¸Šä¸‹å‚¾æ–œ
    const ry = ((e.clientX - r.left) / r.width - .5) * 6;  // å·¦å³å‚¾æ–œ
    card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
  });
  wrap.addEventListener("pointerleave", ()=> card.style.transform = "");

  /* ========= é£„è½èŠ±ç“£ï¼ˆæŒçºŒç”Ÿæˆï¼‰ ========= */
  const petals = document.getElementById("petals");
  const PETAL_EMOJI = ["ğŸŒ¸","ğŸ’®","ğŸ©·","ğŸŒ·"];
  function dropPetal(){
    const el = document.createElement("div");
    el.className = "petal";
    el.textContent = PETAL_EMOJI[(Math.random()*PETAL_EMOJI.length)|0];
    const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
    const x = Math.random() * vw;
    const sway = (Math.random() * 120 + 60) * (Math.random() < .5 ? -1 : 1);
    const dur = Math.random() * 6 + 8; // 8~14s
    el.style.setProperty("--x", x.toFixed(2) + "px");
    el.style.setProperty("--sx", sway.toFixed(2) + "px");
    el.style.animationDuration = dur + "s";
    petals.appendChild(el);
    setTimeout(()=> el.remove(), dur*1000 + 200);
  }
  let petalTimer = null;
  function startPetals(){
    if(window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
    petalTimer = setInterval(dropPetal, 480);
    // åˆå§‹æ’’å¹¾ç‰‡
    for(let i=0;i<6;i++) setTimeout(dropPetal, i*240);
  }
  function stopPetals(){ if(petalTimer){ clearInterval(petalTimer); petalTimer=null; } }
  startPetals();
  window.addEventListener("pagehide", stopPetals);
</script>
</body>
</html>
