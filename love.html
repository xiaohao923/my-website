<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>æ—©ä¸Šèµ·ä¾†çœ‹çœ‹å§</title>
<meta name="color-scheme" content="light dark" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+TC:wght@400;600;800&display=swap" rel="stylesheet" />
<style>
  :root{
    --bg1:#fff7f5; --bg2:#fefaf0;
    --ink:#2b2b2f; --muted:#7a7a86;
    --accent:#ffb4c8; --accent2:#ffd56a;
    --card:rgba(255,255,255,.72);
    --shadow:0 20px 60px rgba(255,145,174,.25);
    --ring:#ffc8dd;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg1:#121217; --bg2:#181821;
      --ink:#ececf6; --muted:#a6a6c9;
      --card:rgba(24,24,32,.65);
      --shadow:0 20px 60px rgba(0,0,0,.35);
      --ring:#5b4bff33;
    }
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100svh; color:var(--ink);
    font-family:"Noto Sans TC","Inter",system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",sans-serif;
    background:
      radial-gradient(1200px 800px at 20% -10%, var(--bg2), transparent 60%),
      radial-gradient(1400px 900px at 110% 10%, var(--accent)/.12, transparent 55%),
      linear-gradient(180deg, var(--bg1), var(--bg2) 60%, var(--bg1));
    display:grid; place-items:center; padding:24px;
  }
  .wrap{ width:min(860px,100%); }
  .card{
    background:var(--card); backdrop-filter: blur(12px);
    border:1px solid #ffffff33; border-radius:22px;
    box-shadow:var(--shadow); padding:clamp(18px,4vw,30px);
    position:relative; overflow:hidden;
  }
  .ring{
    position:absolute; inset:-2px; border-radius:24px; padding:2px; pointer-events:none;
    background: conic-gradient(from 120deg, transparent 0 70%, var(--ring), transparent 90% 100%);
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
    animation: spin 6s linear infinite; opacity:.65;
  }
  @keyframes spin{to{transform:rotate(360deg)}}

  .title{
    display:flex; align-items:center; gap:.6em; flex-wrap:wrap;
    font-weight:800; letter-spacing:.02em; font-size:clamp(22px,3.8vw,30px);
  }
  .subtitle{ color:var(--muted); margin-top:6px; }

  .viewer{
    margin-top:14px; background:linear-gradient(180deg,#fff,#fff8fb);
    border:1px solid #ffffffaa; border-radius:16px; padding:22px; position:relative; overflow:hidden;
  }
  @media (prefers-color-scheme: dark){
    .viewer{ background:linear-gradient(180deg,#151521,#171726); border-color:#ffffff22; }
  }
  .h{ font-size:clamp(20px,3.2vw,26px); font-weight:800; margin:0 0 10px; }
  .msg{
    white-space:pre-wrap; word-break:break-word; line-height:1.92; font-size:1.06rem;
    opacity:0; transform: translateY(6px); animation: fadeIn .6s ease .2s forwards;
  }
  @keyframes fadeIn{to{opacity:1; transform:none}}

  .footer{ margin-top:14px; color:var(--muted); font-size:.9rem; text-align:center; }

  /* äº’å‹•ï¼šæŒ‰ä½æš–å…‰ã€é»æ“Šæ„›å¿ƒç²’å­ */
  .viewer:active::after{
    content:""; position:absolute; inset:-10%; pointer-events:none; border-radius:20px;
    background: radial-gradient(400px 280px at var(--x,50%) var(--y,50%), #ffd6e5aa, transparent 60%);
    transition: background .12s;
  }
  .heart{ position:absolute; font-size:18px; opacity:.95; animation: pop 1.1s ease forwards;
    user-select:none; pointer-events:none; filter: drop-shadow(0 6px 10px rgba(255,0,90,.25)); }
  @keyframes pop{
    0%{ transform: translate(-50%, -20%) scale(.6); opacity:0; }
    10%{ opacity:1; }
    100%{ transform: translate(-50%, -120%) scale(1.3); opacity:0; }
  }

  /* å›é¥‹è¡¨æƒ…ï¼ˆåƒ…æœ¬åœ°æš«å­˜ï¼Œä¸ä¸Šå‚³ï¼‰ */
  .reactions{
    display:flex; gap:10px; flex-wrap:wrap; margin-top:14px;
  }
  .rx{
    display:inline-flex; align-items:center; gap:6px; padding:10px 12px; border-radius:999px;
    background:linear-gradient(180deg,#ffd3e2,#ffc0d6); color:#5a3142; font-weight:700;
    border:1px solid #ffffff88; cursor:pointer; user-select:none;
    box-shadow:0 6px 16px rgba(255,164,190,.35); transition: transform .06s ease, filter .2s ease;
  }
  .rx:active{ transform: translateY(1px) scale(.98); }
  .rx .n{ min-width:1.4em; text-align:right; }
  .rx[data-active="1"]{ filter: brightness(1.06); }

  /* å°è²¼ç´™è§’æ¨™ */
  .sticker{
    position:absolute; right:-6px; top:-6px; transform: rotate(10deg);
    background:linear-gradient(180deg,#ffe9a7,#ffd56a); color:#5a460f;
    border:1px solid #ffffffaa; border-radius:14px; padding:6px 10px; font-weight:800;
    box-shadow:0 10px 22px rgba(255,213,106,.35);
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="ring"></div>
    <div class="sticker">çœ‹å®Œè¨˜å¾—è¬› ğŸ’Œ</div>

    <div class="title" id="title">ğŸŒ· çµ¦é‡è¦çš„äºº Â· æº«æŸ”å‚³å¿ƒ</div>
    <div class="subtitle" id="subtitle">æˆ‘æƒ³æŠŠå…¨ä¸–ç•Œçš„æº«æŸ”éƒ½åˆ†ä½ ä¸€é»é»</div>

    <section class="viewer" id="viewer" aria-label="æº«é¦¨è¨Šæ¯é–±è®€å€">
      <h2 class="h" id="h"></h2>
      <div class="msg" id="msg"></div>
    </section>

    <div class="reactions" id="reactions" aria-label="å›é¥‹è¡¨æƒ…ï¼ˆæœ¬åœ°ï¼‰">
      <div class="rx" data-k="heart">ğŸ’— <span class="n">0</span></div>
      <div class="rx" data-k="sparkles">âœ¨ <span class="n">0</span></div>
      <div class="rx" data-k="hug">ğŸ¤— <span class="n">0</span></div>
    </div>

    <div class="footer" id="sig"></div>
  </div>
</div>

<script>
  /* ===== åªåœ¨é€™è£¡æ”¹å…§å®¹ï¼ˆå¯«æ­»åœ¨æª”æ¡ˆï¼‰===== */
  const DATA = {
    heading: "ä¸è¦åœ¨ç‚ºåˆ¥äººå‚·å¿ƒã„Œ",
    message: `ä½ ä¸ç”¨è¦ºå¾—æˆ‘è·Ÿå¤œåŠåµæ¶éƒ½æ˜¯å› ç‚ºä½  æˆ‘ä¸æƒ³çœ‹åˆ°ä½ å—æ¬ºè² ä¹Ÿä¸æƒ³è®“ä½ é›£éå‚·å¿ƒè¢«é æ¯ æ‰€ä»¥æˆ‘æ‰æœƒç½µä»–
    ä½ ä¹Ÿä¸è¦è½æ¯å€‹äººçš„è©± å«ä½ å¹¹å˜›ä½ å°±å¹¹å˜› ä½ æ˜¯å€‹äººä¸æ˜¯åˆ¥äººçš„å‚€å„¡
    ã€‚`,
    sign: "â€” xiaohao~",
    date: new Date().toLocaleDateString("zh-TW", { year:"numeric", month:"long", day:"numeric" })
  };
  // ä¹Ÿå¯ä»¥æ”¹ä¸Šé¢æ¨™é¡Œ/å‰¯æ¨™é¡Œ
  document.getElementById("title").textContent = "ğŸŒ· çµ¦ä½ çš„æº«æŸ”å°ä¿¡";
  document.getElementById("subtitle").textContent = "æŠŠå°å°çš„æº«æš–ï¼Œæ”¾é€²ä½ å£è¢‹";

  /* ===== å°‡å…§å®¹å¡é€²ç•«é¢ ===== */
  const h = document.getElementById("h");
  const msg = document.getElementById("msg");
  const sig = document.getElementById("sig");
  h.textContent = DATA.heading;
  msg.textContent = DATA.message;
  sig.textContent = `${DATA.sign} Â· ${DATA.date}`;

  /* ===== äº’å‹•ï¼šæ„›å¿ƒç²’å­ + æŒ‰ä½æš–å…‰ ===== */
  const viewer = document.getElementById("viewer");
  function spawnHeart(x,y){
    const el = document.createElement("div");
    el.className = "heart";
    el.textContent = ["ğŸ’—","ğŸ’–","ğŸ’","ğŸ’“","ğŸ’"][Math.floor(Math.random()*5)];
    el.style.left = x + "px"; el.style.top = y + "px";
    viewer.appendChild(el);
    setTimeout(()=> el.remove(), 1200);
  }
  viewer.addEventListener("pointermove", (e)=>{
    const r = viewer.getBoundingClientRect();
    viewer.style.setProperty("--x", ((e.clientX - r.left)/r.width*100).toFixed(2)+"%");
    viewer.style.setProperty("--y", ((e.clientY - r.top)/r.height*100).toFixed(2)+"%");
  });
  viewer.addEventListener("pointerdown", (e)=>{
    const r = viewer.getBoundingClientRect();
    spawnHeart(e.clientX - r.left, e.clientY - r.top);
  });

  /* ===== è¡¨æƒ…å›é¥‹ï¼ˆæœ¬åœ°æš«å­˜ï¼Œä¸ä¸Šå‚³ã€ä¸è·¨è£ç½®ï¼‰===== */
  const box = document.getElementById("reactions");
  const KEY = "warm-reactions-v1";
  const state = JSON.parse(sessionStorage.getItem(KEY) || "{}");
  function render(){
    for(const btn of box.querySelectorAll(".rx")){
      const k = btn.dataset.k;
      const n = state[k]?.n || 0;
      btn.querySelector(".n").textContent = n;
      btn.dataset.active = state[k]?.me ? "1" : "0";
    }
  }
  render();
  box.addEventListener("click", (e)=>{
    const btn = e.target.closest(".rx"); if(!btn) return;
    const k = btn.dataset.k;
    const me = !(state[k]?.me); // åˆ‡æ›è‡ªå·±çš„é»æ“Šç‹€æ…‹
    const cur = state[k]?.n || 0;
    state[k] = { n: cur + (me ? 1 : -1), me };
    sessionStorage.setItem(KEY, JSON.stringify(state));
    render();
    // å°ç…™ç«
    const rect = btn.getBoundingClientRect();
    for(let i=0;i<8;i++){
      setTimeout(()=>spawnHeart(Math.random()*rect.width + rect.left - viewer.getBoundingClientRect().left,
                                Math.random()*rect.height + rect.top - viewer.getBoundingClientRect().top), i*30);
    }
  });

  /* ===== ç„¡ç·¨è¼¯æ¨¡å¼ä¿è­·ï¼ˆé é¢å…§æ²’æœ‰ä»»ä½• input/textareaï¼‰===== */
  // ä»€éº¼éƒ½ä¸åšï¼Œå°±å¾ˆå®‰å…¨ï¼ˆå“¼ï¼‰
</script>

<!-- åˆ—å°æ¨£å¼ï¼ˆå¯å°æˆå¡ç‰‡ï¼‰ -->
<style media="print">
  body{ background:#fff; padding:0; }
  .ring, .sticker, .reactions{ display:none !important; }
  .wrap{ width:100%; }
  .card{ box-shadow:none; border:0; padding:0; }
  .viewer{ border:0; background:#fff; }
</style>
</body>
</html>